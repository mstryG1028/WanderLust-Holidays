<% layout("/layouts/boilerplate") %>

<div class="show-section container">
  <h1 class="listing-title text-center mb-4">
    <%= listing.title %>
  </h1>

  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">

      <div class="card show-card-new">

        <!-- IMAGE ON TOP -->
        <% if (listing.image && listing.image.url) { %>
          <img
            src="<%= listing.image.url %>"
            class="card-img-top show-img-top"
            alt="listing image"
          >
        <% } else { %>
          <img
            src="https://images.unsplash.com/photo-1505691938895-1758d7feb511"
            class="card-img-top show-img-top"
            alt="default image"
          >
        <% } %>

        <!-- CARD BODY -->
        <div class="card-body">

          <p class="owner-text mb-2">
            Hosted by <b><%= listing.owner.username %></b>
          </p>

          <p class="description-text">
            <%= listing.description %>
          </p>

          <hr>

          <p class="price-text">
            ‚Çπ <%= listing.price.toLocaleString("en-IN") %>
            <span>/ night</span>
          </p>

          <p class="location-text">
            üìç <%= listing.location %>, <%= listing.country %>
          </p>

          <% if (currUser && listing.owner.equals(currUser._id)) { %>
            <div class="edit-delete-wrapper mt-4">
              <a class="btn btn-dark"
                 href="/listings/<%= listing._id %>/edit">
                 Edit
              </a>

              <form method="POST"
                    action="/listings/<%= listing._id %>?_method=DELETE"
                    class="d-inline">
                <button class="btn btn-danger">
                  Delete
                </button>
              </form>
            </div>
          <% } %>

        </div>
      </div>

    </div>
  </div>
</div>
